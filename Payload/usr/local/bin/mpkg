#!/bin/bash
args=$1
pkg=$2
ROOTFS="/"
LIBRARY="/usr/local/mpkglib"

RED='\033[0;31m'
GRN='\033[0;32m'
YEL='\033[0;33m'
BLU='\033[0;34m'
NC='\033[0m'
if [[ -z $args ]]; then
	$LIBRARY/binary/mpkg-manual
	exit
elif [[ $args == "-i" ]] || [[ $args == "--install" ]]; then
	sudo /usr/local/bin/mpkg-install "$2" "$3" "$4" "$5" "$6"
	exit
elif [[ $args == "-r" ]] || [[ $args == "--remove" ]]; then
	sudo /usr/local/bin/mpkg-remove "$2" "$3"
	exit
elif [[ $args == "-h" ]] || [[ $args == "--help" ]]; then
	$LIBRARY/binary/mpkg-manual
	exit
elif [[ $args == "-b" ]] || [[ $args == "--block-remove" ]]; then
	sudo /usr/local/bin/mpkg-blockremove "$2" "$3"
elif [[ $args == "--force-unlock" ]]; then
	echo "Forcing mpkg unlock..."
	sudo rm $LIBRARY/lock
	echo -e "${GRN}Done.${NC}"
	exit
elif [[ $args == "-v" ]] || [[ $args == "--version" ]]; then
	echo "Macintosh Packager"
	echo "Version "$(<$LIBRARY/db/mpkg/version)
	exit
elif [[ $args == "-p" ]] || [[ $args == "--package-inspect" ]]; then
	/usr/local/bin/mpkg-grabinfo "$2"
elif [[ $args == "-l" ]] || [[ $args == "--list" ]]; then
	ls $LIBRARY/db
	exit
elif [[ $args == "-m" ]] || [[ $args == "--make" ]]; then
	/usr/local/bin/mpkg-make "$2" "$3" "$4"
elif [[ $args == "-c" ]] || [[ $args == "--create" ]]; then
	/usr/local/bin/mpkg-create "$2"
else
	$LIBRARY/binary/mpkg-manual
	exit
fi
